<!doctype html>
<html lang="en" ng-app>
  <head>
    <title>PayPal Demo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootstrap-responsive.min.css">
    <style>
      body {
        padding-top: 60px;
      }
    </style>
   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <!--<script src="https://www.paypalobjects.com/api/checkout.js"></script>-->
  </head>
  <body>
    <div class="container" ng-controller="ChatController">
      <div class="navbar navbar-fixed-top navbar-inverse">
        <div class="navbar-inner">
          <div class="pull-right">
            <a href="https://c9.io" class="brand">Demo Showcasing PayPal EC v4 </a>
          </div>
        </div>
      </div>
      <div class="page-header">
        <h1>PayPal Native XO Demo</h1>
      </div>
      <div class="row">
        <div class="col-md-12">
          <p>This is a demo server to showcase PayPal Express Checkout </p>       
        </div>
      </div>
     
    </div>

    <div id="FNBlock">
    </div>
    <script type="text/javascript">
    var uniqueId=getParameterByName("id");
    document.getElementById("FNBlock").innerHTML='<script type="application/json" fncls="fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99"> { "f":"'+uniqueId+'","s":"MERCHANT_CHECKOUT_BA_RT_FN"}<\/script>'; 
    function getParameterByName(name, url) { if (!url) url = window.location.href; name = name.replace(/[\[\]]/g, "\\$&"); var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"), results = regex.exec(url); if (!results) return null; if (!results[2]) return ''; return decodeURIComponent(results[2].replace(/\+/g, " ")); }

    function makeServerCall()
    {
      fetch('https://arvindamrit.herokuapp.com/juspaycreate', {
  method: 'post',
  headers: {
    'Accept': 'application/json, text/plain, */*',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({"customer_id": "cst_zdwpilklo6wa6sfa", "risk_id":uniqueId,"security":"amrit"})
}).then(res=>res.json())
  .then(res => console.log(res));
    }
</script>
<script type="text/javascript" src="https://c.paypal.com/da/r/fb.js"></script>

    
    <div id="paypal-button-container"></div>
    <button id="rtButton" onclick="makeServerCall()">Pay with PayPal Account</button>
    <!-- <script>
        paypal.Button.render({

            env: 'sandbox', // sandbox | production

            // PayPal Client IDs - replace with your own
            // Create a PayPal app: https://developer.paypal.com/developer/applications/create
            client: {
                sandbox:    'AY_7Ot1bDbkeUe0A61I6oaFeBAAu36vOUQ7dJCm7_6aqYdwXjjI_3fb1-tgq43BykTnq4dUg7D2jUZwf',
                production: ''
            },

            // Show the buyer a 'Pay Now' button in the checkout flow
            commit: true,

            // payment() is called when the button is clicked
            payment: function(data, actions) {

                // Make a call to the REST api to create the payment
                // return actions.payment.create({
                //     payment: {
                //         transactions: [
                //             {
                //                 amount: { total: '10.00', currency: 'USD' }
                //             }
                //         ]
                //     }
                // });

                
            },

            // onAuthorize() is called when the buyer approves the payment
            onAuthorize: function(data, actions) {
                //window.alert('Payment approved');
                // Make a call to the REST api to execute the payment
                return actions.payment.execute().then(function(res) {
                    
                    window.alert('Payment Complete!');
                });
            }

        }, '#paypal-button-container');

    </script> -->
         
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
  
  </body>
</html>